# 微信小程序接入实操指南

本文档将详细指导你如何将本电子菜单小程序接入微信小程序平台。

## 📋 前置准备

### 1. 注册微信小程序账号

1. 访问 [微信公众平台](https://mp.weixin.qq.com/)
2. 点击右上角"立即注册"
3. 选择"小程序"
4. 填写账号信息（邮箱、密码等）
5. 邮箱验证
6. 信息登记（个人或企业）
7. 微信认证（可选，个人开发者可跳过）

### 2. 获取 AppID

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入"开发" → "开发管理" → "开发设置"
3. 找到"开发者ID（AppID）"，复制保存

> **测试号说明**：如果只是测试，可以在微信开发者工具中使用测试号，无需注册。

## 🛠️ 开发环境配置

### 1. 下载并安装微信开发者工具

1. 访问 [微信开发者工具下载页面](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 根据操作系统选择对应版本下载
3. 安装并启动微信开发者工具

### 2. 创建小程序项目

#### 方式一：导入现有项目（推荐）

1. 打开微信开发者工具
2. 点击"+"或"导入项目"
3. 填写项目信息：
   - **项目名称**：电子菜单（可自定义）
   - **目录**：选择本项目的 `CookingApp` 文件夹路径
   - **AppID**：填写你的小程序 AppID（或选择"测试号"）
   - **开发模式**：选择"小程序"
4. 点击"确定"

#### 方式二：新建项目后替换文件

1. 在微信开发者工具中创建新项目
2. 将本项目所有文件复制到新项目目录
3. 重新打开项目

### 3. 配置项目信息

编辑 `project.config.json` 文件，确保以下配置正确：

```json
{
  "appid": "your-appid-here",  // 替换为你的 AppID
  "projectname": "CookingApp",
  "description": "电子菜单小程序"
}
```

## 🖼️ 准备图片资源

### 1. 底部导航图标

在 `images/tabbar/` 目录下准备以下图标：

| 文件名 | 尺寸建议 | 说明 |
|--------|---------|------|
| `home.png` | 81x81px | 首页图标（未选中） |
| `home-active.png` | 81x81px | 首页图标（选中） |
| `recipe.png` | 81x81px | 菜谱图标（未选中） |
| `recipe-active.png` | 81x81px | 菜谱图标（选中） |
| `order.png` | 81x81px | 订单图标（未选中） |
| `order-active.png` | 81x81px | 订单图标（选中） |
| `profile.png` | 81x81px | 我的图标（未选中） |
| `profile-active.png` | 81x81px | 我的图标（选中） |

**图标获取方式**：
- 使用设计工具（如 Figma、Sketch）制作
- 使用在线图标库（如 [IconFont](https://www.iconfont.cn/)）
- 使用 AI 工具生成

### 2. 默认图片

在 `images/` 目录下准备：

- `default-avatar.png` - 默认头像（建议 200x200px）
- `default-bg.jpg` - 默认背景图（建议 750x400px）
- `default-recipe.png` - 默认菜谱图片（建议 750x500px）

**临时方案**：
如果暂时没有图片，可以：
1. 使用在线占位图服务（如 [Placeholder.com](https://via.placeholder.com/)）
2. 使用纯色图片作为占位
3. 小程序会显示默认占位（可能显示为空白）

## ✅ 验证配置

### 1. 检查文件结构

确保项目目录结构完整：

```
CookingApp/
├── app.js
├── app.json
├── app.wxss
├── sitemap.json
├── project.config.json
├── pages/
│   ├── index/
│   ├── shop/
│   ├── recipe/
│   ├── order/
│   ├── ingredient/
│   ├── mealplan/
│   └── profile/
├── utils/
└── images/
```

### 2. 编译测试

1. 在微信开发者工具中点击"编译"按钮
2. 检查控制台是否有错误
3. 在模拟器中测试各个页面功能

### 3. 真机预览

1. 点击工具栏"预览"按钮
2. 使用微信扫码在手机上预览
3. 测试各项功能是否正常

## 🚀 发布上线

### 1. 代码上传

1. 在微信开发者工具中点击"上传"按钮
2. 填写版本号和项目备注
3. 点击"上传"

### 2. 提交审核

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入"版本管理"
3. 找到刚上传的版本，点击"提交审核"
4. 填写审核信息：
   - **服务类目**：选择"餐饮/外卖"或"生活服务"
   - **标签**：填写相关标签
   - **小程序页面截图**：上传关键页面截图
   - **小程序功能页面**：填写主要功能页面路径
5. 提交审核

### 3. 发布

审核通过后：
1. 在"版本管理"中找到审核通过的版本
2. 点击"发布"
3. 小程序正式上线

## 🔧 常见问题

### Q1: 编译报错 "pages/index/index" 未找到

**解决方案**：
- 检查 `app.json` 中的 `pages` 路径是否正确
- 确保所有页面文件都存在

### Q2: 图片不显示

**解决方案**：
- 检查图片路径是否正确
- 确保图片文件存在
- 使用绝对路径（以 `/` 开头）

### Q3: 真机预览时功能异常

**解决方案**：
- 检查是否开启了"不校验合法域名"
- 在"详情" → "本地设置"中勾选相关选项
- 检查代码中是否有真机限制的 API

### Q4: 无法获取用户信息

**解决方案**：
- 微信小程序已调整用户信息获取方式
- 需要使用 `wx.getUserProfile` API
- 需要用户主动触发（如点击按钮）

### Q5: 数据丢失

**解决方案**：
- 本小程序使用本地存储，清除缓存会丢失数据
- 建议定期使用"导出数据"功能备份
- 后续可集成云开发实现数据同步

## 📱 功能测试清单

在发布前，建议测试以下功能：

### 基础功能
- [ ] 首页正常显示
- [ ] 底部导航切换正常
- [ ] 店铺信息设置和保存
- [ ] 添加和编辑菜谱
- [ ] 查看菜谱详情
- [ ] 搜索菜谱
- [ ] 随机点菜
- [ ] 创建订单
- [ ] 查看订单列表
- [ ] 接单和出餐（管理员）
- [ ] 添加和管理食材
- [ ] 查看可做菜谱
- [ ] 创建饮食计划
- [ ] 一键下单
- [ ] 数据导出和导入

### 权限测试
- [ ] 管理员功能正常
- [ ] 普通用户权限限制正常

### 兼容性测试
- [ ] iOS 设备测试
- [ ] Android 设备测试
- [ ] 不同屏幕尺寸适配

## 🎨 自定义配置

### 修改主题色

在 `app.wxss` 中修改：

```css
/* 主色调 */
.navigationBarBackgroundColor: #ff6b6b;
.tabBarSelectedColor: #ff6b6b;
```

### 修改页面标题

在 `app.json` 中修改：

```json
{
  "window": {
    "navigationBarTitleText": "你的标题"
  }
}
```

### 添加新页面

1. 在 `pages` 目录下创建新页面文件夹
2. 在 `app.json` 的 `pages` 数组中添加页面路径
3. 创建对应的 `.wxml`、`.js`、`.wxss` 文件

## 📚 相关资源

- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信小程序 API 文档](https://developers.weixin.qq.com/miniprogram/dev/api/)
- [微信小程序设计指南](https://developers.weixin.qq.com/miniprogram/design/)

## 💡 优化建议

### 短期优化
1. 添加加载动画
2. 优化图片加载性能
3. 添加错误提示
4. 完善空状态提示

### 长期优化
1. 集成微信云开发
2. 实现数据云端同步
3. 添加用户登录系统
4. 实现订单消息推送
5. 添加数据统计分析

## 🆘 获取帮助

如遇到问题：
1. 查看微信小程序官方文档
2. 在微信开发者工具中查看控制台错误信息
3. 检查代码逻辑和 API 调用
4. 参考本文档的常见问题部分

---

**祝你接入顺利！如有问题，欢迎反馈。** 🎉
