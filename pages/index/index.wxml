<!--pages/index/index.wxml-->
<view class="container">
  <!-- åº—é“ºä¿¡æ¯å¡ç‰‡ -->
  <view class="shop-card" wx:if="{{shopInfo}}">
    <image class="shop-background" src="{{shopInfo.background || '/images/default-bg.jpg'}}" mode="aspectFill"></image>
    <view class="shop-info">
      <image class="shop-avatar" src="{{shopInfo.avatar || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="shop-details">
        <text class="shop-name">{{shopInfo.name}}</text>
        <text class="shop-intro">{{shopInfo.intro}}</text>
        <view class="kitchen-tag" wx:if="{{currentKitchen}}">
          <text>{{currentKitchen.name}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToOrder">
      <view class="action-icon">ğŸ“‹</view>
      <text>ç‚¹èœä¸‹å•</text>
    </view>
    <view class="action-item" bindtap="goToRecipeList">
      <view class="action-icon">ğŸ“–</view>
      <text>æŸ¥çœ‹èœè°±</text>
    </view>
    <view class="action-item" bindtap="goToIngredient">
      <view class="action-icon">ğŸ¥¬</view>
      <text>é£Ÿæç®¡ç†</text>
    </view>
    <view class="action-item" bindtap="goToMealPlan">
      <view class="action-icon">ğŸ“…</view>
      <text>é¥®é£Ÿè®¡åˆ’</text>
    </view>
  </view>

  <!-- ä»Šæ—¥æ¨è -->
  <view class="section">
    <view class="section-title">
      <text>ä»Šæ—¥æ¨è</text>
      <text class="more" bindtap="goToRecipeList">æ›´å¤š ></text>
    </view>
    <scroll-view class="recipe-scroll" scroll-x="true">
      <view class="recipe-item" wx:for="{{recommendedRecipes}}" wx:key="id" bindtap="viewRecipe" data-id="{{item.id}}">
        <image class="recipe-image" src="{{item.image || '/images/default-recipe.png'}}" mode="aspectFill"></image>
        <view class="recipe-info">
          <text class="recipe-name">{{item.name}}</text>
          <text class="recipe-category">{{item.category}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æœ€è¿‘è®¢å• -->
  <view class="section" wx:if="{{recentOrders.length > 0}}">
    <view class="section-title">
      <text>æœ€è¿‘è®¢å•</text>
      <text class="more" bindtap="goToOrderList">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    <view class="order-list">
      <view class="order-item" wx:for="{{recentOrders}}" wx:key="id" bindtap="viewOrder" data-id="{{item.id}}">
        <view class="order-header">
          <text class="order-time">{{item.createTime}}</text>
          <text class="order-status {{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="order-items">
          <text wx:for="{{item.items}}" wx:key="id" wx:for-item="orderItem">
            {{orderItem.name}} x{{orderItem.quantity}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¯åšèœè°±æç¤º -->
  <view class="section" wx:if="{{availableRecipes.length > 0}}">
    <view class="section-title">
      <text>æ ¹æ®ç°æœ‰é£Ÿæå¯åš</text>
    </view>
    <view class="recipe-grid">
      <view class="recipe-card" wx:for="{{availableRecipes}}" wx:key="id" bindtap="viewRecipe" data-id="{{item.id}}">
        <image class="recipe-image" src="{{item.image || '/images/default-recipe.png'}}" mode="aspectFill"></image>
        <view class="recipe-name">{{item.name}}</view>
      </view>
    </view>
  </view>
</view>
