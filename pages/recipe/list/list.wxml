<!--pages/recipe/list/list.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input class="search-input" placeholder="æœç´¢èœè°±..." value="{{searchKeyword}}" bindinput="onSearchInput" />
    <view class="search-icon">ğŸ”</view>
  </view>

  <!-- åˆ†ç±»ç­›é€‰ -->
  <scroll-view class="category-scroll" scroll-x="true">
    <view class="category-item {{currentCategory === '' ? 'active' : ''}}" bindtap="filterByCategory" data-category="">
      å…¨éƒ¨
    </view>
    <view class="category-item {{currentCategory === item ? 'active' : ''}}" 
          wx:for="{{categories}}" 
          wx:key="*this" 
          bindtap="filterByCategory" 
          data-category="{{item}}">
      {{item}}
    </view>
  </scroll-view>

  <!-- æ“ä½œæ  -->
  <view class="action-bar">
    <button class="btn btn-primary" bindtap="randomRecipe">ğŸ² éšæœºç‚¹èœ</button>
    <button class="btn btn-success" wx:if="{{isAdmin}}" bindtap="addRecipe">+ æ·»åŠ èœè°±</button>
  </view>

  <!-- èœè°±åˆ—è¡¨ -->
  <view class="recipe-list" wx:if="{{filteredRecipes.length > 0}}">
    <view class="recipe-item" wx:for="{{filteredRecipes}}" wx:key="id" bindtap="viewRecipe" data-id="{{item.id}}">
      <image class="recipe-image" src="{{item.image || '/images/default-recipe.png'}}" mode="aspectFill"></image>
      <view class="recipe-content">
        <view class="recipe-header">
          <text class="recipe-name">{{item.name}}</text>
          <text class="recipe-tag required" wx:if="{{item.isRequired}}">å¿…ç‚¹</text>
        </view>
        <text class="recipe-category">{{item.category}}</text>
        <text class="recipe-desc">{{item.description || 'æš‚æ— æè¿°'}}</text>
        <view class="recipe-footer">
          <text class="recipe-info">ğŸ‘¥ {{item.servings || 1}}äººä»½</text>
          <text class="recipe-info">â± {{item.cookTime || 'æœªçŸ¥'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:else>
    <view class="empty-icon">ğŸ½</view>
    <text>æš‚æ— èœè°±</text>
    <button class="btn btn-primary" wx:if="{{isAdmin}}" bindtap="addRecipe" style="margin-top: 30rpx;">æ·»åŠ ç¬¬ä¸€ä¸ªèœè°±</button>
  </view>
</view>
